{% extends 'books/base.html' %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<h1 class="page-title">{{ page_title }}</h1>

<div class="actions">
    <a href="{% url 'books:store_create' %}" class="btn btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω</a>
</div>

<!-- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ -->
{% if stores %}
    <div class="filters">
        <form method="get" class="search-form">
            <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." 
                   value="{{ current_search }}" class="form-control">
            <input type="text" name="city" placeholder="–§–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É..." 
                   value="{{ current_city }}" class="form-control">
            <button type="submit" class="btn btn-primary">üîç –ù–∞–π—Ç–∏</button>
            {% if current_search or current_city %}
                <a href="{% url 'books:store_list' %}" class="btn btn-secondary">‚úñÔ∏è –°–±—Ä–æ—Å–∏—Ç—å</a>
            {% endif %}
        </form>
    </div>
{% endif %}

<!-- –°–ø–∏—Å–æ–∫ –º–∞–≥–∞–∑–∏–Ω–æ–≤ -->
{% if stores %}
    <div class="list-group">
        {% for store in stores %}
            <div class="list-group-item">
                <div>
                    <h3 style="margin-bottom: 0.5rem;">
                        <a href="{% url 'books:store_detail' store.pk %}">{{ store.name }}</a>
                    </h3>
                    <p style="color: #6c757d; margin-bottom: 0.25rem;">
                        <strong>–ì–æ—Ä–æ–¥:</strong> {{ store.city }}
                    </p>
                    <p style="color: #6c757d;">
                        <strong>–ö–Ω–∏–≥:</strong> {{ store.books_count }}
                    </p>
                </div>
                <div class="actions">
                    <a href="{% url 'books:store_detail' store.pk %}" class="btn btn-primary btn-sm">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                    <a href="{% url 'books:store_update' store.pk %}" class="btn btn-success btn-sm">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <a href="{% url 'books:store_delete' store.pk %}" class="btn btn-danger btn-sm">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="card">
        <p>–ú–∞–≥–∞–∑–∏–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. <a href="{% url 'books:store_create' %}">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –º–∞–≥–∞–∑–∏–Ω</a></p>
    </div>
{% endif %}
{% endblock %}

