<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ–º–∞ #25. OAuth 2.0 - –î–∏–∞–≥—Ä–∞–º–º—ã</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #16a085;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #16a085;
            padding-left: 10px;
        }
        .diagram-container {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .description {
            background: #d5f4e6;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .mermaid {
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>üîê –¢–µ–º–∞ #25. OAuth 2.0 –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - –î–∏–∞–≥—Ä–∞–º–º—ã</h1>

    <div class="description">
        <p><strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã OAuth 2.0, –ø–æ—Ç–æ–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Django REST Framework.</p>
    </div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ OAuth 2.0 -->
    <div class="diagram-container">
        <h2>1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ OAuth 2.0 –≤ Django</h2>
        <div class="mermaid">
        graph TB
            A[–ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ] -->|1. –ó–∞–ø—Ä–æ—Å —Ç–æ–∫–µ–Ω–∞| B[OAuth2 Server<br/>django-oauth-toolkit]
            B -->|2. –ü—Ä–æ–≤–µ—Ä–∫–∞ credentials| C[–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö<br/>Applications]
            C -->|3. –í–∞–ª–∏–¥–∞—Ü–∏—è| B
            B -->|4. Access Token + Refresh Token| A
            
            A -->|5. –ó–∞–ø—Ä–æ—Å —Å —Ç–æ–∫–µ–Ω–æ–º| D[Resource Server<br/>Django REST Framework]
            D -->|6. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞| E[OAuth2Authentication]
            E -->|7. –í–∞–ª–∏–¥–∞—Ü–∏—è| F[–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö<br/>AccessTokens]
            F -->|8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å| E
            E -->|9. –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω| D
            D -->|10. –ó–∞—â–∏—â–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å| G[API Endpoint<br/>/api/oauth2/protected/]
            G -->|11. JSON –æ—Ç–≤–µ—Ç| A
            
            style A fill:#3498db,stroke:#2980b9,color:#fff
            style B fill:#2ecc71,stroke:#27ae60,color:#fff
            style D fill:#9b59b6,stroke:#8e44ad,color:#fff
            style G fill:#e67e22,stroke:#d35400,color:#fff
        </div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ OAuth 2.0: –∫–ª–∏–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω —É —Å–µ—Ä–≤–µ—Ä–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º.</p>
    </div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ 2: –ü–æ—Ç–æ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ -->
    <div class="diagram-container">
        <h2>2. –ü–æ—Ç–æ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è Access Token (Resource Owner Password Credentials)</h2>
        <div class="mermaid">
        sequenceDiagram
            participant Client as –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            participant OAuth as OAuth2 Server<br/>/o/token/
            participant DB as –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
            participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            
            Client->>OAuth: POST /o/token/<br/>grant_type=password<br/>username, password<br/>client_id, client_secret
            OAuth->>DB: –ü—Ä–æ–≤–µ—Ä–∫–∞ Application<br/>(client_id, client_secret)
            DB-->>OAuth: Application –Ω–∞–π–¥–µ–Ω–∞
            OAuth->>User: –ü—Ä–æ–≤–µ—Ä–∫–∞ credentials<br/>(username, password)
            User-->>OAuth: Credentials –≤–∞–ª–∏–¥–Ω—ã
            OAuth->>DB: –°–æ–∑–¥–∞–Ω–∏–µ AccessToken<br/>–∏ RefreshToken
            DB-->>OAuth: –¢–æ–∫–µ–Ω—ã —Å–æ–∑–¥–∞–Ω—ã
            OAuth-->>Client: 200 OK<br/>{access_token, refresh_token,<br/>expires_in, scope}
            
            Note over Client,OAuth: –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 1 —á–∞—Å<br/>Refresh Token - 1 –¥–µ–Ω—å
        </div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è Access Token —á–µ—Ä–µ–∑ Resource Owner Password Credentials grant type.</p>
    </div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ 3: –ü–æ—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É -->
    <div class="diagram-container">
        <h2>3. –ü–æ—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É</h2>
        <div class="mermaid">
        sequenceDiagram
            participant Client as –ö–ª–∏–µ–Ω—Ç
            participant API as API Endpoint<br/>/api/oauth2/protected/
            participant Auth as OAuth2Authentication
            participant DB as –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö<br/>AccessTokens
            participant Resource as –ó–∞—â–∏—â–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å
            
            Client->>API: GET /api/oauth2/protected/<br/>Authorization: Bearer token
            API->>Auth: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
            Auth->>DB: –ü–æ–∏—Å–∫ AccessToken
            DB-->>Auth: –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω
            Auth->>Auth: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
            Auth->>DB: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            DB-->>Auth: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω
            Auth-->>API: request.user —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω<br/>request.auth —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
            API->>Resource: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
            Resource-->>API: –î–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å–∞
            API-->>Client: 200 OK<br/>{message, user, scopes, token_info}
            
            alt –¢–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω –∏–ª–∏ –∏—Å—Ç–µ–∫
                Auth-->>API: 401 Unauthorized
                API-->>Client: {detail: "Invalid token"}
            end
        </div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É.</p>
    </div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ 4: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã OAuth 2.0 -->
    <div class="diagram-container">
        <h2>4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã OAuth 2.0</h2>
        <div class="mermaid">
        graph TB
            subgraph OAuthComponents["OAuth 2.0 Components"]
                A["Authorization Server<br/>django-oauth-toolkit"]
                B["Resource Server<br/>Django REST Framework"]
                C["Client Application"]
                D["Resource Owner<br/>User"]
            end
            
            subgraph DjangoSettings["Django Settings"]
                E["OAUTH2_PROVIDER<br/>settings.py"]
                F["REST_FRAMEWORK<br/>authentication_classes"]
                G["MIDDLEWARE<br/>OAuth2TokenMiddleware"]
            end
            
            subgraph DatabaseModels["Database Models"]
                H["Application<br/>–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"]
                I["AccessToken<br/>—Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞"]
                J["RefreshToken<br/>—Ç–æ–∫–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"]
                K["Grant<br/>–∫–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"]
            end
            
            subgraph APIEndpoints["API Endpoints"]
                L["/o/authorize/<br/>—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"]
                M["/o/token/<br/>–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤"]
                N["/o/revoke_token/<br/>–æ—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–æ–≤"]
                O["/api/oauth2/protected/<br/>–∑–∞—â–∏—â–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å"]
            end
            
            A --> E
            A --> G
            B --> F
            A --> H
            A --> I
            A --> J
            A --> K
            A --> L
            A --> M
            A --> N
            B --> O
            
            C --> A
            C --> B
            D --> A
            
            style A fill:#2ecc71,stroke:#27ae60,color:#fff
            style B fill:#9b59b6,stroke:#8e44ad,color:#fff
            style C fill:#3498db,stroke:#2980b9,color:#fff
            style D fill:#e67e22,stroke:#d35400,color:#fff
        </div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ OAuth 2.0 —Å–∏—Å—Ç–µ–º—ã: —Å–µ—Ä–≤–µ—Ä—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤, –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ API endpoints.</p>
    </div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
    <div class="diagram-container">
        <h2>5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OAuth 2.0 —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</h2>
        <div class="mermaid">
        graph TB
            A[HTTP Request] --> B[Django REST Framework]
            B --> C{Authentication Classes}
            
            C -->|1. –ü—Ä–æ–≤–µ—Ä–∫–∞| D[SessionAuthentication<br/>–¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞]
            D -->|–£—Å–ø–µ—Ö| E[–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω]
            D -->|–ù–µ—É–¥–∞—á–∞| F[–°–ª–µ–¥—É—é—â–∏–π –º–µ—Ç–æ–¥]
            
            F -->|2. –ü—Ä–æ–≤–µ—Ä–∫–∞| G[JWTAuthentication<br/>–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π]
            G -->|–£—Å–ø–µ—Ö| E
            G -->|–ù–µ—É–¥–∞—á–∞| H[–°–ª–µ–¥—É—é—â–∏–π –º–µ—Ç–æ–¥]
            
            H -->|3. –ü—Ä–æ–≤–µ—Ä–∫–∞| I[OAuth2Authentication<br/>–¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤]
            I -->|–£—Å–ø–µ—Ö| E
            I -->|–ù–µ—É–¥–∞—á–∞| J[401 Unauthorized]
            
            E --> K[Permissions Check]
            K -->|–†–∞–∑—Ä–µ—à–µ–Ω–æ| L[View Execution]
            K -->|–ó–∞–ø—Ä–µ—â–µ–Ω–æ| M[403 Forbidden]
            
            L --> N[Response]
            J --> N
            M --> N
            
            style D fill:#3498db,stroke:#2980b9,color:#fff
            style G fill:#9b59b6,stroke:#8e44ad,color:#fff
            style I fill:#2ecc71,stroke:#27ae60,color:#fff
            style E fill:#27ae60,stroke:#229954,color:#fff
            style J fill:#e74c3c,stroke:#c0392b,color:#fff
            style M fill:#e74c3c,stroke:#c0392b,color:#fff
        </div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–µ—Ç–æ–¥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: Session ‚Üí JWT ‚Üí OAuth2. –ü–µ—Ä–≤—ã–π —É—Å–ø–µ—à–Ω—ã–π –º–µ—Ç–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p>
    </div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ Refresh Token -->
    <div class="diagram-container">
        <h2>6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Access Token —á–µ—Ä–µ–∑ Refresh Token</h2>
        <div class="mermaid">
        sequenceDiagram
            participant Client as –ö–ª–∏–µ–Ω—Ç
            participant OAuth as OAuth2 Server<br/>/o/token/
            participant DB as –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
            
            Note over Client: Access Token –∏—Å—Ç–µ–∫<br/>(—á–µ—Ä–µ–∑ 1 —á–∞—Å)
            Client->>OAuth: POST /o/token/<br/>grant_type=refresh_token<br/>refresh_token=xxx<br/>client_id, client_secret
            OAuth->>DB: –ü—Ä–æ–≤–µ—Ä–∫–∞ RefreshToken
            DB-->>OAuth: RefreshToken –Ω–∞–π–¥–µ–Ω<br/>–∏ –Ω–µ –æ—Ç–æ–∑–≤–∞–Ω
            OAuth->>OAuth: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
            OAuth->>DB: –û—Ç–∑—ã–≤ —Å—Ç–∞—Ä–æ–≥–æ AccessToken
            OAuth->>DB: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ AccessToken<br/>–∏ RefreshToken
            DB-->>OAuth: –¢–æ–∫–µ–Ω—ã —Å–æ–∑–¥–∞–Ω—ã
            OAuth-->>Client: 200 OK<br/>{access_token: –Ω–æ–≤—ã–π,<br/>refresh_token: –Ω–æ–≤—ã–π,<br/>expires_in: 3600}
            
            Note over Client,OAuth: –ù–æ–≤—ã–π —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω<br/>–µ—â–µ 1 —á–∞—Å
        </div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å—Ç–µ–∫—à–µ–≥–æ Access Token —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Refresh Token –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–≤–æ–¥–∞ credentials.</p>
    </div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ 7: Scope –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ -->
    <div class="diagram-container">
        <h2>7. –°–∏—Å—Ç–µ–º–∞ Scope (–ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞)</h2>
        <div class="mermaid">
        graph LR
            A[OAuth2 Token] --> B{Scope –ø—Ä–æ–≤–µ—Ä–∫–∞}
            
            B -->|scope: read| C[–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö<br/>GET –∑–∞–ø—Ä–æ—Å—ã]
            B -->|scope: write| D[–ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö<br/>POST, PUT, PATCH]
            B -->|scope: read write| E[–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø<br/>–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏]
            
            C --> F[–†–∞–∑—Ä–µ—à–µ–Ω–æ]
            D --> F
            E --> F
            
            B -->|scope –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç| G[–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω<br/>403 Forbidden]
            
            style A fill:#3498db,stroke:#2980b9,color:#fff
            style C fill:#2ecc71,stroke:#27ae60,color:#fff
            style D fill:#e67e22,stroke:#d35400,color:#fff
            style E fill:#9b59b6,stroke:#8e44ad,color:#fff
            style F fill:#27ae60,stroke:#229954,color:#fff
            style G fill:#e74c3c,stroke:#c0392b,color:#fff
        </div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –°–∏—Å—Ç–µ–º–∞ scope –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Ç–æ–∫–µ–Ω–∞: read –¥–ª—è —á—Ç–µ–Ω–∏—è, write –¥–ª—è –∑–∞–ø–∏—Å–∏, –∏–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.</p>
    </div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ 8: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ -->
    <div class="diagram-container">
        <h2>8. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ —Å OAuth 2.0</h2>
        <div class="mermaid">
        graph TB
            A[myshop/] --> B[settings.py<br/>OAUTH2_PROVIDER<br/>REST_FRAMEWORK]
            A --> C[urls.py<br/>path o/ include oauth2_provider]
            
            D[books/api/] --> E[views.py<br/>OAuth2ProtectedView]
            D --> F[urls.py<br/>oauth2/protected/]
            
            G[requirements.txt] --> H[django-oauth-toolkit]
            
            I[–ê–¥–º–∏–Ω–∫–∞ Django] --> J[Applications<br/>AccessTokens<br/>RefreshTokens<br/>Grants]
            
            K[–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö] --> L[oauth2_provider_application<br/>oauth2_provider_accesstoken<br/>oauth2_provider_refreshtoken<br/>oauth2_provider_grant]
            
            B --> E
            C --> F
            H --> B
            B --> J
            J --> L
            
            style A fill:#3498db,stroke:#2980b9,color:#fff
            style D fill:#2ecc71,stroke:#27ae60,color:#fff
            style G fill:#9b59b6,stroke:#8e44ad,color:#fff
            style I fill:#e67e22,stroke:#d35400,color:#fff
            style K fill:#e74c3c,stroke:#c0392b,color:#fff
        </div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –º–∞—Ä—à—Ä—É—Ç—ã, views –∏ –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è OAuth 2.0.</p>
    </div>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</body>
</html>
