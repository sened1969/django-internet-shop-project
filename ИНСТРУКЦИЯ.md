# Инструкция по использованию проекта интернет-магазина

## Быстрый старт

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Применение миграций базы данных

```bash
python manage.py makemigrations
python manage.py migrate
```

### 3. Создание суперпользователя (для доступа к админ-панели)

```bash
python manage.py createsuperuser
```

Следуйте инструкциям для создания учетной записи администратора.

### 4. Запуск сервера разработки

```bash
python manage.py runserver
```

### 5. Открытие в браузере

- **Главная страница (список товаров)**: http://127.0.0.1:8000/
- **Админ-панель**: http://127.0.0.1:8000/admin/

## Добавление товаров

### Через админ-панель Django

1. Откройте админ-панель: http://127.0.0.1:8000/admin/
2. Войдите используя учетные данные суперпользователя
3. Перейдите в раздел "Товары" (Products)
4. Нажмите "Добавить товар"
5. Заполните форму:
   - Название товара
   - Описание товара
   - Цена товара
   - Изображение товара (опционально)
6. Сохраните товар

### Через Django shell (для тестирования)

```bash
python manage.py shell
```

В консоли Python выполните:

```python
from shop.models import Product

# Создание товара без изображения
product1 = Product.objects.create(
    name="Ноутбук Dell XPS 15",
    description="Мощный ноутбук для работы и творчества. Процессор Intel Core i7, 16GB RAM, SSD 512GB.",
    price=89999.99
)

# Создание товара с описанием
product2 = Product.objects.create(
    name="Смартфон iPhone 15 Pro",
    description="Новейший смартфон от Apple с процессором A17 Pro, камерой 48 МП и дисплеем Super Retina XDR.",
    price=99999.00
)

# Создание товара
product3 = Product.objects.create(
    name="Наушники Sony WH-1000XM5",
    description="Беспроводные наушники с активным шумоподавлением и превосходным качеством звука.",
    price=24999.50
)

print("Товары успешно созданы!")
```

## Структура проекта

```
myshop/
├── myshop/              # Основная директория проекта Django
│   ├── __init__.py
│   ├── settings.py      # Настройки проекта (TEMPLATES, STATIC_URL, MEDIA_URL)
│   ├── urls.py         # Главный файл URL-маршрутов
│   ├── wsgi.py
│   └── asgi.py
├── shop/               # Приложение интернет-магазина
│   ├── __init__.py
│   ├── admin.py        # Настройка админ-панели для модели Product
│   ├── apps.py
│   ├── models.py       # Модель Product
│   ├── views.py        # Представления product_list и product_detail
│   └── urls.py         # URL-маршруты приложения
├── templates/          # Глобальные шаблоны
│   └── shop/
│       ├── base.html           # Базовый шаблон с хэдером и футером
│       ├── product_list.html   # Шаблон списка товаров
│       └── product_detail.html # Шаблон детальной страницы товара
├── static/             # Статические файлы (CSS, JS, изображения)
│   └── shop/
│       └── css/
│           └── styles.css  # Стили для оформления сайта
├── media/              # Медиа-файлы (загружаемые пользователями)
│   └── products/       # Изображения товаров будут сохраняться здесь
├── manage.py           # Управляющий скрипт Django
├── requirements.txt   # Зависимости проекта
└── README.md          # Документация проекта
```

## Основные функции

### 1. Список товаров (`product_list`)

- **URL**: `/`
- **Шаблон**: `templates/shop/product_list.html`
- **Функционал**:
  - Отображает все товары из базы данных
  - Показывает название, цену, изображение и краткое описание
  - Использует фильтры для форматирования данных:
    - `length` - количество товаров
    - `floatformat:2` - форматирование цены (2 знака после запятой)
    - `truncatechars:100` - обрезка описания до 100 символов
    - `date` - форматирование даты создания
  - Обрабатывает случай пустого каталога

### 2. Детальная страница товара (`product_detail`)

- **URL**: `/product/<product_id>/`
- **Шаблон**: `templates/shop/product_detail.html`
- **Функционал**:
  - Отображает полную информацию о товаре
  - Показывает название, описание, цену, изображение и дату создания
  - **Обработка ошибок**: Если товар не найден, отображается страница 404 с понятным сообщением
  - Использует фильтры:
    - `floatformat:2` - форматирование цены
    - `linebreaks` - преобразование переносов строк в HTML
    - `date` - форматирование даты

### 3. Базовый шаблон (`base.html`)

- **Функционал**:
  - Содержит общую структуру страницы (хэдер, футер)
  - Подключает статические CSS файлы через `{% static %}`
  - Использует блоки `{% block %}` для переопределения контента
  - Навигационное меню с ссылками на основные страницы

## Использованные технологии Django

### Шаблонные теги

- `{% extends %}` - наследование шаблонов
- `{% block %}` - определение блоков для переопределения
- `{% for %}` - циклы для перебора товаров
- `{% if %}` - условные конструкции
- `{% url %}` - генерация URL по имени маршрута
- `{% static %}` - подключение статических файлов
- `{% load static %}` - загрузка тега static
- `{% now %}` - вывод текущей даты

### Фильтры шаблонов

- `floatformat:2` - форматирование чисел с плавающей точкой (2 знака после запятой)
- `truncatechars:100` - обрезка строки до указанного количества символов
- `date:"d.m.Y H:i"` - форматирование даты в заданном формате
- `length` - получение длины списка или строки
- `linebreaks` - преобразование переносов строк в HTML теги `<br>`

### Модель Product

- **name** (CharField) - название товара, максимум 200 символов
- **description** (TextField) - подробное описание товара
- **price** (DecimalField) - цена товара с валидацией минимального значения (0.01)
- **image** (ImageField) - изображение товара, опционально
- **created_at** (DateTimeField) - дата создания, заполняется автоматически

## Обработка ошибок

### Случай 1: Товар не найден

В представлении `product_detail` используется функция `get_object_or_404`, которая автоматически возвращает ошибку 404, если товар не найден. В шаблоне `product_detail.html` добавлена обработка этого случая с понятным сообщением для пользователя.

### Случай 2: Пустой каталог

В шаблоне `product_list.html` используется конструкция `{% empty %}` для отображения сообщения, когда товаров нет в базе данных.

## Статические и медиа-файлы

### Статические файлы

- Расположены в директории `static/shop/css/`
- Подключаются через тег `{% static 'shop/css/styles.css' %}`
- Настроены в `settings.py` через `STATIC_URL` и `STATICFILES_DIRS`

### Медиа-файлы

- Изображения товаров сохраняются в `media/products/`
- Настроены в `settings.py` через `MEDIA_URL` и `MEDIA_ROOT`
- В режиме разработки обслуживаются автоматически через настройки в `urls.py`

## Дополнительные возможности

### Адаптивный дизайн

CSS файл содержит медиа-запросы для адаптации под мобильные устройства (экраны шириной менее 768px).

### Административная панель

Модель `Product` зарегистрирована в админ-панели с настройками:
- Отображение полей: название, цена, дата создания, наличие изображения
- Фильтрация по дате создания
- Поиск по названию и описанию
- Группировка полей в секции

## Решение проблем

### Проблема: Статические файлы не загружаются

**Решение**: Убедитесь, что:
1. В `settings.py` правильно настроены `STATIC_URL` и `STATICFILES_DIRS`
2. В шаблонах используется `{% load static %}` перед использованием `{% static %}`
3. В `urls.py` добавлена обработка статических файлов в режиме разработки

### Проблема: Изображения товаров не отображаются

**Решение**: Убедитесь, что:
1. В `settings.py` настроены `MEDIA_URL` и `MEDIA_ROOT`
2. В `urls.py` добавлена обработка медиа-файлов в режиме разработки
3. Папка `media/products/` существует и доступна для записи

### Проблема: Ошибка "No module named 'shop'"

**Решение**: Убедитесь, что:
1. Приложение `shop` добавлено в `INSTALLED_APPS` в `settings.py`
2. Вы находитесь в правильной директории при запуске команд Django

## Дальнейшее развитие

Возможные улучшения проекта:

1. Добавление корзины покупок
2. Реализация поиска товаров
3. Добавление категорий товаров
4. Реализация пагинации для списка товаров
5. Добавление системы отзывов
6. Интеграция платежных систем
7. Добавление системы авторизации пользователей

