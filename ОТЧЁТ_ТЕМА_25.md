# –û–¢–ß–Å–¢: –¢–µ–º–∞ #25. Django web-api. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è OAuth 2.0

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2025-12-08  
**–í–∞—Ä–∏–∞–Ω—Ç —Å–¥–∞—á–∏:** –í–∞—Ä–∏–∞–Ω—Ç 1 - –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OAuth 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
3. [–†–µ–∞–ª–∏–∑–∞—Ü–∏—è](#—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
4. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
5. [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
6. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

---

## 1. –í–≤–µ–¥–µ–Ω–∏–µ

### 1.1. –û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–º—ã

**–¢–µ–º–∞ #25: Django web-api. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è OAuth 2.0**

–¶–µ–ª—å —Ç–µ–º—ã:
- –ü–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ OAuth 2.0 –≤ Django
- –û—Å–≤–æ–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `django-oauth-toolkit`
- –ù–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å Access Token –∏ Refresh Token
- –†–∞–∑–æ–±—Ä–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

### 1.2. –í—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å–¥–∞—á–∏

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OAuth 2.0 (–ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô)**

–í—ã–±—Ä–∞–Ω –±–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç:
- –£—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É `django-oauth-toolkit`
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ —Å OAuth2 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫—É –∞–¥–º–∏–Ω–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏ —Ç–æ–∫–µ–Ω–∞–º–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Ç–æ–∫–µ–Ω–æ–≤

### 1.3. –¶–µ–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å OAuth 2.0 —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—ã–π API endpoint, –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ OAuth2 —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- ‚úÖ –û–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (JWT, Session)

---

## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 2.1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–ù–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:**
```txt
django-oauth-toolkit>=1.7.0
```

**–ö–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
pip install django-oauth-toolkit>=1.7.0
```

### 2.2. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ settings.py

#### 2.2.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ INSTALLED_APPS

```python
INSTALLED_APPS = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    'oauth2_provider',  # OAuth 2.0 —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–¢–µ–º–∞ 25)
    # ...
]
```

#### 2.2.2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ middleware

```python
MIDDLEWARE = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ middleware
    'oauth2_provider.middleware.OAuth2TokenMiddleware',  # OAuth 2.0 middleware
    # ...
]
```

#### 2.2.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAUTH2_PROVIDER

```python
OAUTH2_PROVIDER = {
    'ACCESS_TOKEN_EXPIRE_SECONDS': 3600,  # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ Access Token (1 —á–∞—Å)
    'REFRESH_TOKEN_EXPIRE_SECONDS': 86400,  # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ Refresh Token (1 –¥–µ–Ω—å)
    'ALLOW_PUBLIC_CLIENTS': True,  # –†–∞–∑—Ä–µ—à–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞–º –±–µ–∑ client_secret
    'SCOPES': {
        'read': '–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö',
        'write': '–ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö',
    },
    'DEFAULT_SCOPES': ['read'],  # Scope –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
}
```

#### 2.2.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ REST_FRAMEWORK –Ω–∞—Å—Ç—Ä–æ–µ–∫

```python
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': [
        'rest_framework.authentication.SessionAuthentication',
        'rest_framework_simplejwt.authentication.JWTAuthentication',
        'oauth2_provider.contrib.rest_framework.OAuth2Authentication',  # –ù–æ–≤—ã–π
    ],
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
}
```

**–í–∞–∂–Ω–æ:** OAuth2Authentication –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞, —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### 2.3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ urls.py

#### 2.3.1. –ì–ª–∞–≤–Ω—ã–π urls.py (myshop/urls.py)

```python
urlpatterns = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
    # OAuth 2.0 –º–∞—Ä—à—Ä—É—Ç—ã (–¢–µ–º–∞ 25)
    path('o/', include('oauth2_provider.urls', namespace='oauth2_provider')),
    # ...
]
```

–≠—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ OAuth2 endpoints:
- `/o/authorize/` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `/o/token/` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- `/o/revoke_token/` - –æ—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–æ–≤
- `/o/introspect/` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞

#### 2.3.2. API urls.py (books/api/urls.py)

```python
urlpatterns = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã
    # OAuth 2.0 –∑–∞—â–∏—â–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å (–¢–µ–º–∞ 25)
    path('oauth2/protected/', views.OAuth2ProtectedView.as_view(), name='oauth2-protected'),
]
```

### 2.4. –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
python manage.py migrate
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è OAuth2 –º–æ–¥–µ–ª–µ–π:
  - `oauth2_provider_application` - –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `oauth2_provider_accesstoken` - —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞
  - `oauth2_provider_refreshtoken` - —Ç–æ–∫–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  - `oauth2_provider_grant` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

## 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 3.1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ OAuth2 endpoint

**–§–∞–π–ª:** `books/api/views.py`

```python
from oauth2_provider.contrib.rest_framework import OAuth2Authentication
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import permissions
from django.utils import timezone
from drf_spectacular.utils import extend_schema

@extend_schema(
    summary="OAuth 2.0 –∑–∞—â–∏—â–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å",
    description="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. "
                "–¢—Ä–µ–±—É–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π Access Token –¥–ª—è –¥–æ—Å—Ç—É–ø–∞.",
    responses={
        200: {
            'type': 'object',
            'properties': {
                'message': {'type': 'string'},
                'user': {'type': 'string'},
                'scopes': {'type': 'array', 'items': {'type': 'string'}},
                'token_info': {'type': 'object'}
            }
        },
        401: {'description': '–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OAuth 2.0'}
    }
)
class OAuth2ProtectedView(APIView):
    """
    –ó–∞—â–∏—â–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å, –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ OAuth 2.0 —Ç–æ–∫–µ–Ω—ã.
    """
    authentication_classes = [OAuth2Authentication]
    permission_classes = [permissions.IsAuthenticated]
    
    def get(self, request):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ —Ç–æ–∫–µ–Ω–µ."""
        token_info = {}
        if hasattr(request, 'auth') and request.auth:
            token_info = {
                'token': str(request.auth.token)[:20] + '...' if hasattr(request.auth, 'token') else None,
                'expires': request.auth.expires.isoformat() if hasattr(request.auth, 'expires') else None,
                'scope': request.auth.scope if hasattr(request.auth, 'scope') else None,
            }
        
        return Response({
            'message': '–î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω —á–µ—Ä–µ–∑ OAuth 2.0',
            'user': request.user.email if hasattr(request.user, 'email') else request.user.username,
            'user_id': request.user.id,
            'scopes': request.auth.scope.split() if hasattr(request.auth, 'scope') and request.auth.scope else [],
            'token_info': token_info,
            'timestamp': timezone.now().isoformat(),
        })
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `OAuth2Authentication` –¥–ª—è —ç—Ç–æ–≥–æ endpoint
- –¢—Ä–µ–±—É–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π Access Token
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ —Ç–æ–∫–µ–Ω–µ
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

### 3.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∫–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–æ–¥–µ–ª–∏ OAuth2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π `oauth2_provider` –≤ –∞–¥–º–∏–Ω–∫–µ Django.

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –≤ –∞–¥–º–∏–Ω–∫–µ:**
- **Applications** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ (–∫–ª–∏–µ–Ω—Ç–∞–º–∏)
- **Access Tokens** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- **Refresh Tokens** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **Grants** - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### 3.2.1. –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CustomUser

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—É—é –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `CustomUser` —Å email –≤–º–µ—Å—Ç–æ username. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ "–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç. –í–∞—à–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –Ω–µ—Ç —Å—Ä–µ–¥–∏ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π" –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π admin –∫–ª–∞—Å—Å `CustomApplicationAdmin` –≤ `shop/admin.py`, –∫–æ—Ç–æ—Ä—ã–π:

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç queryset –¥–ª—è –ø–æ–ª—è user:**
   ```python
   queryset = User.objects.all().order_by('email')
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ã—á–Ω—ã–π Select –≤–∏–¥–∂–µ—Ç –≤–º–µ—Å—Ç–æ RawIdWidget:**
   ```python
   kwargs["widget"] = forms.Select(attrs={'class': 'form-control'})
   ```

3. **–ò—Å–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–µ user –∏–∑ raw_id_fields:**
   ```python
   raw_id_fields = tuple(f for f in getattr(BaseApplicationAdmin, 'raw_id_fields', ()) if f != 'user')
   ```

4. **–î–æ–±–∞–≤–ª—è–µ—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```python
   list_display_links = ('pk', 'name')  # –ú–æ–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ PK –∏–ª–∏ Name –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ email, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ –∫–ª–∏–∫ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ PK.

### 3.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ `@extend_schema` –≤ `OAuth2ProtectedView`.

**–î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- Swagger UI: `http://127.0.0.1:8000/api/docs/`
- ReDoc: `http://127.0.0.1:8000/api/redoc/`

---

## 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4.1. –°–æ–∑–¥–∞–Ω–∏–µ OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

**–®–∞–≥–∏:**

1. **–í–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É:**
   ```
   http://127.0.0.1:8000/admin/
   ```

2. **–ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª "OAuth2 PROVIDER" ‚Üí "Applications"**

3. **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   - **Name:** `Test OAuth2 Client`
   - **User:** –≤—ã–±—Ä–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `admin@example.com`)
     - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω–∞—è –º–æ–¥–µ–ª—å `CustomUser` —Å email –≤–º–µ—Å—Ç–æ username
     - –í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–∞—Å—Ç–æ–º–Ω–æ–º—É admin
   - **Client type:** `Confidential`
   - **Authorization grant type:** `Resource owner password-based`
   - **Redirect URIs:** –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞)

4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
   - –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è:
     - **Client ID** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `abc123...`)
     - **Client Secret** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `xyz789...`)

### 4.2. –ü–æ–ª—É—á–µ–Ω–∏–µ Access Token

**–ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)**

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª "Access Tokens"
2. –ù–∞–∂–∞—Ç—å "Add Access Token"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - **User:** –≤—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - **Application:** –≤—ã–±—Ä–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - **Expires:** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É –∏—Å—Ç–µ—á–µ–Ω–∏—è
   - **Token:** –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
   - **Scope:** `read write` (–∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º –¥–ª—è default scope)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

**–ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)**

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl.exe -X POST http://127.0.0.1:8000/o/token/ -d "grant_type=password" -d "username=admin@example.com" -d "password=1234" -d "client_id=YOUR_CLIENT_ID" -d "client_secret=YOUR_CLIENT_SECRET"
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** 
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `curl.exe` –¥–ª—è Windows
- `username` - —ç—Ç–æ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è CustomUser)
- –î–ª—è Git Bash –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—Ä–∞—Ç–Ω—ã–π —Å–ª—ç—à `\` –¥–ª—è –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "abc123def456...",
  "expires_in": 3600,
  "token_type": "Bearer",
  "scope": "read write",
  "refresh_token": "xyz789uvw012..."
}
```

### 4.3. –î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É

**–ú–µ—Ç–æ–¥ 1: –¢–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization**

```bash
curl -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
     http://127.0.0.1:8000/api/oauth2/protected/
```

**–ú–µ—Ç–æ–¥ 2: –¢–æ–∫–µ–Ω –≤ query –ø–∞—Ä–∞–º–µ—Ç—Ä–µ**

```bash
curl "http://127.0.0.1:8000/api/oauth2/protected/?access_token=YOUR_ACCESS_TOKEN"
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "message": "–î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω —á–µ—Ä–µ–∑ OAuth 2.0",
  "user": "admin@example.com",
  "user_id": 1,
  "scopes": ["read", "write"],
  "token_info": {
    "token": "abc123def456ghi789...",
    "expires": "2025-01-27T15:30:00+00:00",
    "scope": "read write"
  },
  "timestamp": "2025-01-27T14:30:00+00:00"
}
```

**–û—à–∏–±–∫–∞ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞:**
```json
{
  "detail": "Authentication credentials were not provided."
}
```

### 4.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ Refresh Token

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://127.0.0.1:8000/o/token/ \
  -d "grant_type=refresh_token" \
  -d "refresh_token=YOUR_REFRESH_TOKEN" \
  -d "client_id=YOUR_CLIENT_ID" \
  -d "client_secret=YOUR_CLIENT_SECRET"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "new_access_token...",
  "expires_in": 3600,
  "token_type": "Bearer",
  "scope": "read write",
  "refresh_token": "new_refresh_token..."
}
```

### 4.5. –û—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–∞

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://127.0.0.1:8000/o/revoke_token/ \
  -d "token=YOUR_ACCESS_TOKEN" \
  -d "client_id=YOUR_CLIENT_ID" \
  -d "client_secret=YOUR_CLIENT_SECRET"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "revoked": true
}
```

---

## 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 5.1. –î–æ—Å—Ç—É–ø–Ω—ã–µ OAuth2 endpoints

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/o/authorize/` | GET | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/o/token/` | POST | –ü–æ–ª—É—á–µ–Ω–∏–µ Access Token –∏ Refresh Token |
| `/o/revoke_token/` | POST | –û—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–∞ |
| `/o/introspect/` | POST | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞ |
| `/api/oauth2/protected/` | GET | –ó–∞—â–∏—â–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å (—Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω) |

### 5.2. –¢–∏–ø—ã Grant (–ø–æ—Ç–æ–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã:**
- **Resource owner password-based** - –¥–ª—è –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–∏–º–µ—Ä–µ)
- **Authorization Code** - –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **Client Credentials** - –¥–ª—è —Å–µ—Ä–≤–µ—Ä-—Å–µ—Ä–≤–µ—Ä –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π

### 5.3. Scope (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞)

**–î–æ—Å—Ç—É–ø–Ω—ã–µ scope:**
- `read` - —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `write` - –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ scope:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `read`
- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞: `read write`

### 5.4. Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–æ—Å—Ç—É–ø:**
- Swagger UI: `http://127.0.0.1:8000/api/docs/`
- ReDoc: `http://127.0.0.1:8000/api/redoc/`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö endpoints
- –û–ø–∏—Å–∞–Ω–∏–µ OAuth2 –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

---

## 6. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### 6.1. –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

‚úÖ **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `django-oauth-toolkit`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã OAuth2 –≤ `settings.py`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–∞—Ä—à—Ä—É—Ç—ã OAuth2
- –í—ã–ø–æ–ª–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

‚úÖ **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞–Ω –∑–∞—â–∏—â–µ–Ω–Ω—ã–π OAuth2 endpoint
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞–¥–º–∏–Ω–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- –°–æ–∑–¥–∞–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π admin –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CustomUser
- –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ñ–æ—Ä–º–µ OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ OAuth2 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –¥–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –æ—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–æ–≤

### 6.2. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

‚úÖ **–£—Å–ø–µ—à–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- OAuth2 —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å JWT –∏ Session –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- –ù–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ API endpoints
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
1. SessionAuthentication (–¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞)
2. JWTAuthentication (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
3. OAuth2Authentication (–¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤)

### 6.3. –£–ª—É—á—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ OAuth 2.0 —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ scope –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∑—ã–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### 6.4. –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

**–î–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è:**
1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏:**
   - Google OAuth
   - GitHub OAuth
   - –î—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
   - –ö–∞—Å—Ç–æ–º–Ω—ã–µ scope –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –¥–æ—Å—Ç—É–ø–∞
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ API
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è OAuth2
   - UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ OAuth2 –∑–∞–ø—Ä–æ—Å–æ–≤

### 6.5. –í—ã–≤–æ–¥—ã

–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OAuth 2.0 —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- ‚úÖ OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã —á–µ—Ä–µ–∑ OAuth2 —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏ —Ç–æ–∫–µ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Ç–µ–º—ã #25 –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

---

## üìé –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```
myshop/
‚îú‚îÄ‚îÄ settings.py              # –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OAuth2
‚îî‚îÄ‚îÄ urls.py                  # –î–æ–±–∞–≤–ª–µ–Ω—ã OAuth2 –º–∞—Ä—à—Ä—É—Ç—ã

books/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ views.py             # –î–æ–±–∞–≤–ª–µ–Ω OAuth2ProtectedView
‚îÇ   ‚îî‚îÄ‚îÄ urls.py              # –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç /api/oauth2/protected/
‚îî‚îÄ‚îÄ admin.py                 # –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ OAuth2 –º–æ–¥–µ–ª—è—Ö

shop/
‚îî‚îÄ‚îÄ admin.py                 # –î–æ–±–∞–≤–ª–µ–Ω CustomApplicationAdmin –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CustomUser

requirements.txt             # –î–æ–±–∞–≤–ª–µ–Ω django-oauth-toolkit
```

### B. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞:**
```python
import requests

url = "http://127.0.0.1:8000/o/token/"
data = {
    "grant_type": "password",
    "username": "admin@example.com",  # Email –≤–º–µ—Å—Ç–æ username (CustomUser)
    "password": "1234",
    "client_id": "YOUR_CLIENT_ID",
    "client_secret": "YOUR_CLIENT_SECRET",
}

response = requests.post(url, data=data)
if response.status_code == 200:
    token_data = response.json()
    print("Access Token:", token_data.get("access_token"))
    print("Refresh Token:", token_data.get("refresh_token"))
else:
    print("Error:", response.json())
```

**Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É:**
```python
import requests

url = "http://127.0.0.1:8000/api/oauth2/protected/"
headers = {
    "Authorization": "Bearer YOUR_ACCESS_TOKEN"
}

response = requests.get(url, headers=headers)
if response.status_code == 200:
    print("Success:", response.json())
else:
    print("Error:", response.json())
```

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2025-12-08  
**–í–µ—Ä—Å–∏—è:** 1.1  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ 1.1:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ—à–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å CustomUser
- –û–ø–∏—Å–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∫–∏ OAuth2 Application
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–æ–¥–µ–ª—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
